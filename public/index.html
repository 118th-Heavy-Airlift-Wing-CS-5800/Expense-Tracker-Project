<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Expense Tracker (CS 5800)</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
  body {
    font-family: Arial, sans-serif;
    max-width: 800px;
    margin: auto;
    padding: 20px;
    background-color: #f8f8f8;
  }

  h1, h2, h3 {
    color: #333;
    text-align: center;
  }

  form, input, button {
    margin: 10px 0;
    display: block;
    width: 100%;
    max-width: 400px;
    margin-left: auto;
    margin-right: auto;
  }

  input, button {
    padding: 8px;
    font-size: 1em;
  }

  ul#expenseList {
    list-style-type: none;
    padding: 0;
  }

  ul#expenseList li {
    background: #fff;
    margin: 5px 0;
    padding: 10px;
    border-left: 5px solid #36A2EB;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  button {
    cursor: pointer;
    background-color: #36A2EB;
    color: white;
    border: none;
    border-radius: 5px;
  }

  button:hover {
    background-color: #2b90d9;
  }

  canvas {
    display: block;
    margin: auto;
  }

  #totalExpenses {
    text-align: center;
    font-weight: bold;
  }

  #expenseForm, #userForm {
    background-color: #ffffff;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
  }
 #userConfirmation {
  margin-top: 10px;
  text-align: center;
  font-weight: bold;
}
#userConfirmation.success {
  color: green;
}
#userConfirmation.error {
  color: red;
}


</style>

</head>
<body>
  <h1>Expense Tracker</h1>
  
    <h2>Create User</h2>
  <form id="userForm">
    <label>Username: <input type="text" id="usernameInput" required></label><br>
    <label>Email: <input type="email" id="emailInput" required></label><br>
    <label>Password: <input type="password" id="passwordInput" required></label><br>
    <button type="submit">Create User</button>
  </form>

  <p id="userMessage" style="color: green; font-weight: bold;"></p>

  <div id="userConfirmation" class="success"></div>

  
  <h2>Set Budget</h2>
    <input type="number" id="budgetAmount" placeholder="Enter your budget">
    <button onclick="setBudget()">Set Budget</button>

    <h3 id="budgetDisplay">Budget: $0.00</h3>
    <h3 id="balanceDisplay">Remaining Balance: $0.00</h3>


  <button id="clearExpensesBtn">Clear All Expenses</button>
  <button onclick="resetAll()">Reset All</button>


  <hr>

  <h2>Add Expense</h2>
  <input type="text" id="expenseCategory" placeholder="Category">
  <input type="number" id="expenseAmount" placeholder="Amount">
  <button onclick="addExpense()">Add Expense</button>

  <h3>Expenses</h3>
  <ul id="expenseList"></ul>
  <h3 style="text-align: center; margin-top: 20px;">Expense Pie Chart</h3>
  <canvas id="expenseChart" width="200" height="200" style="max-width: 300px; max-height: 300px;"></canvas>

  <h3 id="totalExpenses">Total Expenses: $0.00</h3>

  <script>
  let total = 0;
  let budget = 0;
  let expenseData = {}; // Tracks category totals
  let chart; // Chart.js instance

  function addExpense() {
    const categoryInput = document.getElementById("expenseCategory");
    const amountInput = document.getElementById("expenseAmount");

    const category = categoryInput.value.trim();
    const amount = parseFloat(amountInput.value);

    if (category === "" || isNaN(amount)) {
      alert("Please enter a valid category and amount.");
      return;
    }

    const li = document.createElement("li");
    li.textContent = `Category: ${category}, Amount: $${amount.toFixed(2)} `;

    const deleteBtn = document.createElement("button");
    deleteBtn.textContent = "Delete";
    deleteBtn.style.marginLeft = "10px";
    deleteBtn.onclick = function () {
      li.remove();
      total -= amount;
      expenseData[category] -= amount;
      if (expenseData[category] <= 0) delete expenseData[category];
      updateTotal();
      updateBalance();
      updateChart();
    };

    li.appendChild(deleteBtn);
    document.getElementById("expenseList").appendChild(li);

    total += amount;
    expenseData[category] = (expenseData[category] || 0) + amount;

    updateTotal();
    updateBalance();
    updateChart();

    categoryInput.value = "";
    amountInput.value = "";
  }

  function updateTotal() {
    const totalDisplay = document.getElementById("totalExpenses");
    totalDisplay.textContent = `Total Expenses: $${total.toFixed(2)}`;
    totalDisplay.style.color = total > budget ? "red" : "black";
    if (total > budget) {
      totalDisplay.textContent += " âš  Over Budget!";
    }
  }

  function setBudget() {
    const budgetInput = document.getElementById("budgetAmount");
    const value = parseFloat(budgetInput.value);

    if (isNaN(value) || value < 0) {
      alert("Please enter a valid budget amount.");
      return;
    }

    budget = value;
    document.getElementById("budgetDisplay").textContent = `Budget: $${budget.toFixed(2)}`;
    updateBalance();
    budgetInput.value = "";
  }

  function updateBalance() {
    const balance = budget - total;
    document.getElementById("balanceDisplay").textContent = `Remaining Balance: $${balance.toFixed(2)}`;
  }

  function updateChart() {
    const ctx = document.getElementById("expenseChart").getContext("2d");

    const categories = Object.keys(expenseData);
    const amounts = Object.values(expenseData);

    if (chart) chart.destroy(); // Destroy old chart before creating new one

    chart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: categories,
        datasets: [{
          label: 'Expenses by Category',
          data: amounts,
          backgroundColor: [
            '#FF6384', '#36A2EB', '#FFCE56',
            '#4BC0C0', '#9966FF', '#FF9F40'
          ],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'bottom' }
        }
      }
    });
  }
  function resetAll() {
    // Clear expense list
    document.getElementById("expenseList").innerHTML = "";

    // Reset variables
    expenseData = {};
    total = 0;
    budget = 0;

    // Clear chart
    if (chart) {
      chart.destroy();
      chart = null;
    }

    // Reset display fields
    document.getElementById("totalExpenses").textContent = "Total Expenses: $0.00";
    document.getElementById("budgetDisplay").textContent = "Budget: $0.00";
    document.getElementById("balanceDisplay").textContent = "Remaining Balance: $0.00";

    // Clear input fields
    document.getElementById("expenseCategory").value = "";
    document.getElementById("expenseAmount").value = "";
    document.getElementById("budgetAmount").value = "";
  }
</script>



  

  <hr>
 






  <div id="userOutput"></div>
  <hr>


  <script src="script.js"></script>
</body>

</html>